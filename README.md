# ansible3

Задание, которое нам надо было выполнить:
---
   1. Установите Nginx на серверы web1, web2. 
   2. Установите и настройте отказоустойчивость HAProxy Keepalived на серверах haproxy1 и haproxy2. Настройте Keepalived VIP  в соответствии с системой 
   3.На серверах web1, web2, Nginx должен работать на порту 8080 и выдавать свою страницу, сообщающую вам, на каком сервере вы находитесь.  
   4. На серверах с HAProxy программное обеспечение должно обеспечивать балансировку нагрузки серверов web1 и web2 в циклическом режиме. Сделайте время отклика web1 и web2 как можно короче. скажем 1-2 секунды 
 5. Вся установка и настройка программного обеспечения должны выполняться с использованием сценария Ansible. 
 6. 6. Загрузите все файлы для этой задачи на Github и напишите ReadMe с скранами работоспособности и инструкциями по запуску скрипта Ansible.
---
Скопировать репозиторий
Потом зайти через терминал в папку, которую скопировали.
Открываем Vagrantfile.
Меняем 46ую строчку `ssh_pub_key = File.readlines("/home/ismail/.ssh/id_rsa.pub").first.strip` - Надо указать тут свой путь до ключа.

Пишем в консольке `vagrant up`, чтобы подднять виртуалки.
Далее, прописываем в консольке `ansible-playbook nginx.yml`


Если вы все сделали правильно, по ip Vip: 192.168.11.110, у вас должна появиться кастомная страничка:

![](https://github.com/ismailtez/ansible3/blob/main/web1.jpg)

При нажатии Ctrl+Shift+r, у вас обновится страничка с web1 на web2:

![](https://github.com/ismailtez/ansible3/blob/main/web2.jpg)
